{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { APIService } from '@/http/APIService';\nconst apiService = new APIService();\nexport default {\n  name: 'ExpenseCreateUpdate',\n  data() {\n    return {\n      expense: {\n        description: '',\n        amount: 0,\n        date: new Date().toISOString().split('T')[0],\n        category: '',\n        notes: ''\n      },\n      pageTitle: 'New Expense',\n      showMsg: '',\n      errorMessage: '',\n      loading: false,\n      isUpdate: false\n    };\n  },\n  beforeCreate() {\n    const isAuthenticated = localStorage.getItem('access_token');\n    if (!isAuthenticated) {\n      this.$router.push('/auth');\n    }\n  },\n  async mounted() {\n    if (this.$route.params.id) {\n      this.isUpdate = true;\n      this.pageTitle = 'Edit Expense';\n      await this.fetchExpense();\n    }\n  },\n  methods: {\n    async fetchExpense() {\n      try {\n        const response = await apiService.getExpense(this.$route.params.id);\n        this.expense = {\n          ...response.data,\n          date: response.data.date.split('T')[0]\n        };\n      } catch (error) {\n        this.handleError(error);\n      }\n    },\n    async handleSubmit() {\n      this.loading = true;\n      this.showMsg = '';\n      try {\n        const expenseData = {\n          ...this.expense,\n          amount: parseFloat(this.expense.amount)\n        };\n        if (this.isUpdate) {\n          await apiService.updateExpense(this.$route.params.id, expenseData);\n        } else {\n          await apiService.createExpense(expenseData);\n        }\n        this.$router.push('/expenses');\n      } catch (error) {\n        this.handleError(error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleError(error) {\n      this.showMsg = 'error';\n      if (error.response) {\n        switch (error.response.status) {\n          case 400:\n            this.errorMessage = 'Invalid expense data. Please check your inputs.';\n            break;\n          case 401:\n            localStorage.removeItem('access_token');\n            this.$router.push('/auth');\n            break;\n          default:\n            this.errorMessage = 'Error saving expense. Please try again.';\n        }\n      } else {\n        this.errorMessage = 'Network error. Please check your connection.';\n      }\n    },\n    cancel() {\n      this.$router.push('/expenses');\n    }\n  }\n};","map":{"version":3,"names":["APIService","apiService","name","data","expense","description","amount","date","Date","toISOString","split","category","notes","pageTitle","showMsg","errorMessage","loading","isUpdate","beforeCreate","isAuthenticated","localStorage","getItem","$router","push","mounted","$route","params","id","fetchExpense","methods","response","getExpense","error","handleError","handleSubmit","expenseData","parseFloat","updateExpense","createExpense","status","removeItem","cancel"],"sources":["/Users/leothecub/PycharmProjects/pythonActivities/trackspend-fe/src/components/ExpenseCreateUpdate.vue"],"sourcesContent":["<template>\n    <div class=\"expense-form\">\n      <header class=\"header\">\n        <nav class=\"navbar\">\n          <div class=\"logo\">\n            <router-link to=\"/\">TrackSpend</router-link>\n          </div>\n          <div class=\"nav-links\">\n            <router-link to=\"/expenses\" class=\"sign-in-button\">\n              Back to Expenses\n            </router-link>\n          </div>\n        </nav>\n      </header>\n  \n      <main class=\"main-content\">\n        <div class=\"auth-card\">\n          <h2 class=\"auth-title\">{{ pageTitle }}</h2>\n          \n          <div v-if=\"showMsg === 'error'\" class=\"auth-alert error\">\n            {{ errorMessage }}\n          </div>\n  \n          <form @submit.prevent=\"handleSubmit\" class=\"expense-form-content\">\n            <div class=\"form-group\">\n              <label>Description</label>\n              <input\n                v-model=\"expense.description\"\n                type=\"text\"\n                required\n                class=\"form-input\"\n                placeholder=\"Enter description\"\n              />\n            </div>\n  \n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>Amount ($)</label>\n                <input\n                  v-model=\"expense.amount\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  required\n                  class=\"form-input\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n  \n              <div class=\"form-group\">\n                <label>Date</label>\n                <input\n                  v-model=\"expense.date\"\n                  type=\"date\"\n                  required\n                  class=\"form-input\"\n                />\n              </div>\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Category</label>\n              <select v-model=\"expense.category\" class=\"form-input\">\n                <option value=\"\">Select Category</option>\n                <option value=\"Food\">Food</option>\n                <option value=\"Transportation\">Transportation</option>\n                <option value=\"Housing\">Housing</option>\n                <option value=\"Entertainment\">Entertainment</option>\n                <option value=\"Utilities\">Utilities</option>\n                <option value=\"Other\">Other</option>\n              </select>\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Notes</label>\n              <textarea\n                v-model=\"expense.notes\"\n                class=\"form-input\"\n                placeholder=\"Additional notes...\"\n                rows=\"3\"\n              ></textarea>\n            </div>\n  \n            <div class=\"action-buttons\">\n              <button type=\"submit\" class=\"auth-button\" :disabled=\"loading\">\n                {{ loading ? 'Processing...' : 'Save Expense' }}\n              </button>\n              <button type=\"button\" class=\"auth-button secondary\" @click=\"cancel\">\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      </main>\n    </div>\n  </template>\n  \n  <script>\n  import { APIService } from '@/http/APIService';\n  const apiService = new APIService();\n  \n  export default {\n    name: 'ExpenseCreateUpdate',\n    data() {\n      return {\n        expense: {\n          description: '',\n          amount: 0,\n          date: new Date().toISOString().split('T')[0],\n          category: '',\n          notes: ''\n        },\n        pageTitle: 'New Expense',\n        showMsg: '',\n        errorMessage: '',\n        loading: false,\n        isUpdate: false\n      };\n    },\n    beforeCreate() {\n      const isAuthenticated = localStorage.getItem('access_token');\n      if (!isAuthenticated) {\n        this.$router.push('/auth');\n      }\n    },\n    async mounted() {\n      if (this.$route.params.id) {\n        this.isUpdate = true;\n        this.pageTitle = 'Edit Expense';\n        await this.fetchExpense();\n      }\n    },\n    methods: {\n      async fetchExpense() {\n        try {\n          const response = await apiService.getExpense(this.$route.params.id);\n          this.expense = {\n            ...response.data,\n            date: response.data.date.split('T')[0]\n          };\n        } catch (error) {\n          this.handleError(error);\n        }\n      },\n      async handleSubmit() {\n        this.loading = true;\n        this.showMsg = '';\n        \n        try {\n          const expenseData = {\n            ...this.expense,\n            amount: parseFloat(this.expense.amount)\n          };\n  \n          if (this.isUpdate) {\n            await apiService.updateExpense(this.$route.params.id, expenseData);\n          } else {\n            await apiService.createExpense(expenseData);\n          }\n          \n          this.$router.push('/expenses');\n        } catch (error) {\n          this.handleError(error);\n        } finally {\n          this.loading = false;\n        }\n      },\n      handleError(error) {\n        this.showMsg = 'error';\n        if (error.response) {\n          switch (error.response.status) {\n            case 400:\n              this.errorMessage = 'Invalid expense data. Please check your inputs.';\n              break;\n            case 401:\n              localStorage.removeItem('access_token');\n              this.$router.push('/auth');\n              break;\n            default:\n              this.errorMessage = 'Error saving expense. Please try again.';\n          }\n        } else {\n          this.errorMessage = 'Network error. Please check your connection.';\n        }\n      },\n      cancel() {\n        this.$router.push('/expenses');\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .expense-form-content {\n    max-width: 600px;\n    margin: 0 auto;\n  }\n  \n  .form-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n    margin-bottom: 1rem;\n  }\n  \n  .form-group {\n    margin-bottom: 1.5rem;\n  }\n  \n  .form-input {\n    width: 100%;\n    padding: 0.8rem;\n    border: 1px solid #e0e0e0;\n    border-radius: 6px;\n    font-size: 1rem;\n  }\n  \n  .form-input:focus {\n    outline: none;\n    border-color: #42b983;\n  }\n  \n  textarea.form-input {\n    resize: vertical;\n    min-height: 100px;\n  }\n  \n  .action-buttons {\n    display: flex;\n    gap: 1rem;\n    margin-top: 2rem;\n  }\n  \n  .secondary {\n    background-color: #6c757d;\n  }\n  \n  .secondary:hover {\n    background-color: #5a6268;\n  }\n  \n  @media (max-width: 768px) {\n    .form-row {\n      grid-template-columns: 1fr;\n    }\n  }\n  \n  /* Reuse existing header styles */\n  .header {\n    background-color: #2c3e50;\n    padding: 1rem 2rem;\n  }\n  \n  .navbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n  \n  .logo a {\n    color: white;\n    font-size: 1.5rem;\n    font-weight: bold;\n    text-decoration: none;\n  }\n  \n  .sign-in-button {\n    background-color: #42b983;\n    color: white;\n    padding: 0.5rem 1rem;\n    border-radius: 5px;\n    text-decoration: none;\n  }\n  \n  .auth-card {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 2rem;\n  }\n  \n  .auth-title {\n    text-align: center;\n    margin-bottom: 2rem;\n  }\n  \n  .auth-alert.error {\n    background-color: #fee2e2;\n    color: #dc2626;\n    border: 1px solid #fca5a5;\n    padding: 1rem;\n    margin-bottom: 1.5rem;\n    border-radius: 6px;\n  }\n  </style>"],"mappings":";AAiGE,SAASA,UAAS,QAAS,mBAAmB;AAC9C,MAAMC,UAAS,GAAI,IAAID,UAAU,CAAC,CAAC;AAEnC,eAAe;EACbE,IAAI,EAAE,qBAAqB;EAC3BC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE;QACPC,WAAW,EAAE,EAAE;QACfC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5CC,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE;MACT,CAAC;MACDC,SAAS,EAAE,aAAa;MACxBC,OAAO,EAAE,EAAE;MACXC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE,KAAK;MACdC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,YAAYA,CAAA,EAAG;IACb,MAAMC,eAAc,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAC5D,IAAI,CAACF,eAAe,EAAE;MACpB,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,OAAO,CAAC;IAC5B;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE,EAAE;MACzB,IAAI,CAACV,QAAO,GAAI,IAAI;MACpB,IAAI,CAACJ,SAAQ,GAAI,cAAc;MAC/B,MAAM,IAAI,CAACe,YAAY,CAAC,CAAC;IAC3B;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAME,QAAO,GAAI,MAAM7B,UAAU,CAAC8B,UAAU,CAAC,IAAI,CAACN,MAAM,CAACC,MAAM,CAACC,EAAE,CAAC;QACnE,IAAI,CAACvB,OAAM,GAAI;UACb,GAAG0B,QAAQ,CAAC3B,IAAI;UAChBI,IAAI,EAAEuB,QAAQ,CAAC3B,IAAI,CAACI,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QACvC,CAAC;MACH,EAAE,OAAOsB,KAAK,EAAE;QACd,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC;MACzB;IACF,CAAC;IACD,MAAME,YAAYA,CAAA,EAAG;MACnB,IAAI,CAAClB,OAAM,GAAI,IAAI;MACnB,IAAI,CAACF,OAAM,GAAI,EAAE;MAEjB,IAAI;QACF,MAAMqB,WAAU,GAAI;UAClB,GAAG,IAAI,CAAC/B,OAAO;UACfE,MAAM,EAAE8B,UAAU,CAAC,IAAI,CAAChC,OAAO,CAACE,MAAM;QACxC,CAAC;QAED,IAAI,IAAI,CAACW,QAAQ,EAAE;UACjB,MAAMhB,UAAU,CAACoC,aAAa,CAAC,IAAI,CAACZ,MAAM,CAACC,MAAM,CAACC,EAAE,EAAEQ,WAAW,CAAC;QACpE,OAAO;UACL,MAAMlC,UAAU,CAACqC,aAAa,CAACH,WAAW,CAAC;QAC7C;QAEA,IAAI,CAACb,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;MAChC,EAAE,OAAOS,KAAK,EAAE;QACd,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC;MACzB,UAAU;QACR,IAAI,CAAChB,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IACDiB,WAAWA,CAACD,KAAK,EAAE;MACjB,IAAI,CAAClB,OAAM,GAAI,OAAO;MACtB,IAAIkB,KAAK,CAACF,QAAQ,EAAE;QAClB,QAAQE,KAAK,CAACF,QAAQ,CAACS,MAAM;UAC3B,KAAK,GAAG;YACN,IAAI,CAACxB,YAAW,GAAI,iDAAiD;YACrE;UACF,KAAK,GAAG;YACNK,YAAY,CAACoB,UAAU,CAAC,cAAc,CAAC;YACvC,IAAI,CAAClB,OAAO,CAACC,IAAI,CAAC,OAAO,CAAC;YAC1B;UACF;YACE,IAAI,CAACR,YAAW,GAAI,yCAAyC;QACjE;MACF,OAAO;QACL,IAAI,CAACA,YAAW,GAAI,8CAA8C;MACpE;IACF,CAAC;IACD0B,MAAMA,CAAA,EAAG;MACP,IAAI,CAACnB,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;IAChC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}