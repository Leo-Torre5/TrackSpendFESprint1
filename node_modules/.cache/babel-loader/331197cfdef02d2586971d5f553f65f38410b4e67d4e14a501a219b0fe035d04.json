{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"auth-page\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"navbar\"\n};\nconst _hoisted_4 = {\n  class: \"logo\"\n};\nconst _hoisted_5 = {\n  class: \"nav-links\"\n};\nconst _hoisted_6 = {\n  class: \"auth-container\"\n};\nconst _hoisted_7 = {\n  class: \"auth-card\"\n};\nconst _hoisted_8 = {\n  class: \"auth-title\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"auth-alert error\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = {\n  class: \"form-group\"\n};\nconst _hoisted_12 = {\n  class: \"form-group\"\n};\nconst _hoisted_13 = [\"required\"];\nconst _hoisted_14 = {\n  class: \"name-fields\"\n};\nconst _hoisted_15 = {\n  class: \"form-group\"\n};\nconst _hoisted_16 = {\n  class: \"form-group\"\n};\nconst _hoisted_17 = {\n  class: \"form-group\"\n};\nconst _hoisted_18 = {\n  class: \"action-buttons\"\n};\nconst _hoisted_19 = {\n  type: \"submit\",\n  class: \"auth-button\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"nav\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"TrackSpend\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_router_link, {\n    to: \"/users\",\n    class: \"sign-in-button\"\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"Back to Users\")])),\n    _: 1 /* STABLE */\n  })])])]), _createElementVNode(\"main\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h2\", _hoisted_8, _toDisplayString($data.pageTitle), 1 /* TEXT */), $data.showMsg === 'error' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _cache[7] || (_cache[7] = _withModifiers((...args) => $options.handleSubmit && $options.handleSubmit(...args), [\"prevent\"])),\n    class: \"auth-form\"\n  }, [_createElementVNode(\"div\", _hoisted_10, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"Username\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.user.username = $event),\n    type: \"text\",\n    required: \"\",\n    class: \"form-input\",\n    placeholder: \"Enter username\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.user.username]])]), _createElementVNode(\"div\", _hoisted_11, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"Email\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.user.email = $event),\n    type: \"email\",\n    required: \"\",\n    class: \"form-input\",\n    placeholder: \"Enter email\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.user.email]])]), _createElementVNode(\"div\", _hoisted_12, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", null, \"Password\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.user.password = $event),\n    type: \"password\",\n    required: !$data.isUpdate,\n    class: \"form-input\",\n    placeholder: \"Enter password\"\n  }, null, 8 /* PROPS */, _hoisted_13), [[_vModelText, $data.user.password]])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"First Name\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.user.first_name = $event),\n    type: \"text\",\n    class: \"form-input\",\n    placeholder: \"First name\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.user.first_name]])]), _createElementVNode(\"div\", _hoisted_16, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", null, \"Last Name\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.user.last_name = $event),\n    type: \"text\",\n    class: \"form-input\",\n    placeholder: \"Last name\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.user.last_name]])])]), _createElementVNode(\"div\", _hoisted_17, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", null, \"Admin Privileges\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.user.is_staff = $event),\n    class: \"form-input\"\n  }, _cache[15] || (_cache[15] = [_createElementVNode(\"option\", {\n    value: false\n  }, \"Regular User\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: true\n  }, \"Administrator\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.user.is_staff]])]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"button\", _hoisted_19, _toDisplayString($data.isUpdate ? 'Update' : 'Create'), 1 /* TEXT */), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"auth-button secondary\",\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.cancelOperation && $options.cancelOperation(...args))\n  }, \" Cancel \")])], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","key","type","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$data","pageTitle","showMsg","_hoisted_9","errorMessage","_createCommentVNode","onSubmit","_withModifiers","args","$options","handleSubmit","_hoisted_10","$event","user","username","required","placeholder","_hoisted_11","email","_hoisted_12","password","isUpdate","_hoisted_13","_hoisted_14","_hoisted_15","first_name","_hoisted_16","last_name","_hoisted_17","is_staff","value","_hoisted_18","_hoisted_19","onClick","cancelOperation"],"sources":["/Users/leothecub/PycharmProjects/pythonActivities/trackspend-fe/src/components/UserCreate.vue"],"sourcesContent":["<template>\n    <div class=\"auth-page\">\n      <header class=\"header\">\n        <nav class=\"navbar\">\n          <div class=\"logo\">\n            <router-link to=\"/\">TrackSpend</router-link>\n          </div>\n          <div class=\"nav-links\">\n            <router-link to=\"/users\" class=\"sign-in-button\">Back to Users</router-link>\n          </div>\n        </nav>\n      </header>\n  \n      <main class=\"auth-container\">\n        <div class=\"auth-card\">\n          <h2 class=\"auth-title\">{{ pageTitle }}</h2>\n          \n          <div v-if=\"showMsg === 'error'\" class=\"auth-alert error\">\n            {{ errorMessage }}\n          </div>\n  \n          <form @submit.prevent=\"handleSubmit\" class=\"auth-form\">\n            <div class=\"form-group\">\n              <label>Username</label>\n              <input\n                v-model=\"user.username\"\n                type=\"text\"\n                required\n                class=\"form-input\"\n                placeholder=\"Enter username\"\n              />\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Email</label>\n              <input\n                v-model=\"user.email\"\n                type=\"email\"\n                required\n                class=\"form-input\"\n                placeholder=\"Enter email\"\n              />\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Password</label>\n              <input\n                v-model=\"user.password\"\n                type=\"password\"\n                :required=\"!isUpdate\"\n                class=\"form-input\"\n                placeholder=\"Enter password\"\n              />\n            </div>\n  \n            <div class=\"name-fields\">\n              <div class=\"form-group\">\n                <label>First Name</label>\n                <input\n                  v-model=\"user.first_name\"\n                  type=\"text\"\n                  class=\"form-input\"\n                  placeholder=\"First name\"\n                />\n              </div>\n  \n              <div class=\"form-group\">\n                <label>Last Name</label>\n                <input\n                  v-model=\"user.last_name\"\n                  type=\"text\"\n                  class=\"form-input\"\n                  placeholder=\"Last name\"\n                />\n              </div>\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Admin Privileges</label>\n              <select v-model=\"user.is_staff\" class=\"form-input\">\n                <option :value=\"false\">Regular User</option>\n                <option :value=\"true\">Administrator</option>\n              </select>\n            </div>\n  \n            <div class=\"action-buttons\">\n              <button type=\"submit\" class=\"auth-button\">\n                {{ isUpdate ? 'Update' : 'Create' }}\n              </button>\n              <button type=\"button\" class=\"auth-button secondary\" @click=\"cancelOperation\">\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      </main>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  import router from '../router';\n  \n  export default {\n    name: 'UserCreate',\n    data() {\n      return {\n        user: {\n          username: '',\n          email: '',\n          password: '',\n          first_name: '',\n          last_name: '',\n          is_staff: false\n        },\n        pageTitle: 'Create New User',\n        isUpdate: false,\n        showMsg: '',\n        errorMessage: ''\n      };\n    },\n    beforeCreate() {\n      const isAuthenticated = localStorage.getItem('access_token');\n      const isAdmin = JSON.parse(localStorage.getItem('is_staff') || false)\n      \n      if (!isAuthenticated || !isAdmin) {\n        router.push('/auth');\n      }\n    },\n    methods: {\n      async handleSubmit() {\n        try {\n          if (this.isUpdate) {\n            await this.updateUser();\n          } else {\n            await this.createUser();\n          }\n        } catch (error) {\n          this.handleError(error);\n        }\n      },\n      async createUser() {\n        const response = await axios.post(\n          'http://localhost:8000/api/users/',\n          this.user,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`\n            }\n          }\n        );\n        \n        if (response.status === 201) {\n          router.push('/users');\n        }\n      },\n      async updateUser() {\n        const response = await axios.put(\n          `http://localhost:8000/api/users/${this.$route.params.id}/`,\n          this.user,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`\n            }\n          }\n        );\n        \n        if (response.status === 200) {\n          router.push('/users');\n        }\n      },\n      cancelOperation() {\n        router.push('/users');\n      },\n      handleError(error) {\n        this.showMsg = 'error';\n        if (error.response) {\n          switch (error.response.status) {\n            case 401:\n              this.errorMessage = 'Session expired. Please login again.';\n              router.push('/auth');\n              break;\n            case 403:\n              this.errorMessage = 'You do not have permission for this action.';\n              break;\n            case 400:\n              this.errorMessage = error.response.data.detail || 'Invalid input data.';\n              break;\n            default:\n              this.errorMessage = 'Server error. Please try again later.';\n          }\n        } else {\n          this.errorMessage = 'Network error. Please check your connection.';\n        }\n      }\n    },\n    async mounted() {\n      if (this.$route.params.id) {\n        this.isUpdate = true;\n        this.pageTitle = 'Edit User';\n        \n        try {\n          const response = await axios.get(\n            `http://localhost:8000/api/users/${this.$route.params.id}/`,\n            {\n              headers: {\n                Authorization: `Bearer ${localStorage.getItem('access_token')}`\n              }\n            }\n          );\n          this.user = response.data;\n        } catch (error) {\n          this.handleError(error);\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  /* Reuse styles from previous components */\n  .auth-page {\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n  }\n  \n  .auth-container {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n    background-color: #f5f7fb;\n  }\n  \n  .auth-card {\n    background: white;\n    padding: 2.5rem;\n    border-radius: 12px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    width: 100%;\n    max-width: 600px;\n  }\n  \n  .action-buttons {\n    display: flex;\n    gap: 1rem;\n    margin-top: 1.5rem;\n  }\n  \n  .secondary {\n    background-color: #6c757d;\n  }\n  \n  .secondary:hover {\n    background-color: #5a6268;\n  }\n  \n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}