{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from '../router';\nexport default {\n  name: 'UserList',\n  data() {\n    return {\n      users: [],\n      validUserName: 'Admin',\n      showMsg: '',\n      authenticated: false\n    };\n  },\n  beforeCreate() {\n    const isAuthenticated = localStorage.getItem('access_token');\n    const isAdmin = JSON.parse(localStorage.getItem('is_staff') || false);\n    if (!isAuthenticated || !isAdmin) {\n      router.push('/auth');\n    }\n  },\n  async mounted() {\n    await this.getUsers();\n    this.showMessages();\n  },\n  methods: {\n    async getUsers() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/users/', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n        });\n        this.users = response.data;\n      } catch (error) {\n        this.handleError(error);\n      }\n    },\n    showMessages() {\n      if (this.$route.params.msg) {\n        this.showMsg = this.$route.params.msg;\n      }\n    },\n    addNewUser() {\n      router.push('/users/create');\n    },\n    updateUser(user) {\n      router.push(`/users/edit/${user.id}`);\n    },\n    async deleteUser(user) {\n      if (confirm(`Are you sure you want to delete ${user.username}?`)) {\n        try {\n          await axios.delete(`http://localhost:8000/api/users/${user.id}/`, {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`\n            }\n          });\n          router.push('/users/deleted');\n          await this.getUsers();\n        } catch (error) {\n          this.handleError(error);\n        }\n      }\n    },\n    handleError(error) {\n      if (error.response) {\n        switch (error.response.status) {\n          case 401:\n            localStorage.clear();\n            router.push('/auth');\n            break;\n          case 403:\n            alert('You do not have permission for this action');\n            break;\n          default:\n            alert('Error processing request');\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","router","name","data","users","validUserName","showMsg","authenticated","beforeCreate","isAuthenticated","localStorage","getItem","isAdmin","JSON","parse","push","mounted","getUsers","showMessages","methods","response","get","headers","Authorization","error","handleError","$route","params","msg","addNewUser","updateUser","user","id","deleteUser","confirm","username","delete","status","clear","alert"],"sources":["/Users/leothecub/PycharmProjects/pythonActivities/trackspend-fe/src/components/UserList.vue"],"sourcesContent":["<template>\n    <div class=\"auth-page\">\n      <header class=\"header\">\n        <nav class=\"navbar\">\n          <div class=\"logo\">\n            <router-link to=\"/\">TrackSpend</router-link>\n          </div>\n          <div class=\"nav-links\">\n            <router-link to=\"/\" class=\"sign-in-button\">Dashboard</router-link>\n          </div>\n        </nav>\n      </header>\n  \n      <main class=\"user-list-container\">\n        <div class=\"auth-card\">\n          <h2 class=\"auth-title\">User Management</h2>\n          <blockquote class=\"welcome-message\">\n            Welcome {{ validUserName }}!\n            <footer>\n              <small><em>&mdash; TrackSpend Administration Panel</em></small>\n            </footer>\n          </blockquote>\n  \n          <div class=\"status-alerts\">\n            <div v-if=\"showMsg === 'new'\" class=\"auth-alert success\">\n              New user has been created\n            </div>\n            <div v-if=\"showMsg === 'update'\" class=\"auth-alert success\">\n              User information updated\n            </div>\n            <div v-if=\"showMsg === 'deleted'\" class=\"auth-alert success\">\n              User has been deleted\n            </div>\n          </div>\n  \n          <!-- Mobile View -->\n          <div class=\"mobile-view d-md-none\">\n            <button class=\"auth-button\" @click=\"addNewUser\">\n              <span>+ New User</span>\n            </button>\n  \n            <div class=\"user-card\" v-for=\"user in users\" :key=\"user.id\">\n              <div class=\"card-header\">\n                <h3>{{ user.username }}</h3>\n                <p>{{ user.email }}</p>\n              </div>\n              <div class=\"card-body\">\n                <p><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>\n                <p><strong>Role:</strong> {{ user.is_staff ? 'Admin' : 'User' }}</p>\n                <div class=\"actions\">\n                  <button @click=\"updateUser(user)\" class=\"icon-button\">\n                    <i class=\"fas fa-edit\"></i>\n                  </button>\n                  <button @click=\"deleteUser(user)\" class=\"icon-button\">\n                    <i class=\"fas fa-trash\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n  \n          <!-- Desktop View -->\n          <div class=\"desktop-view d-none d-md-block\">\n            <table class=\"user-table\">\n              <thead>\n                <tr>\n                  <th>Username</th>\n                  <th>Email</th>\n                  <th>First Name</th>\n                  <th>Last Name</th>\n                  <th>Role</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"user in users\" :key=\"user.id\">\n                  <td>{{ user.username }}</td>\n                  <td>{{ user.email }}</td>\n                  <td>{{ user.first_name }}</td>\n                  <td>{{ user.last_name }}</td>\n                  <td>{{ user.is_staff ? 'Admin' : 'User' }}</td>\n                  <td class=\"actions\">\n                    <button @click=\"updateUser(user)\" class=\"icon-button\">\n                      <i class=\"fas fa-edit\"></i>\n                    </button>\n                    <button @click=\"deleteUser(user)\" class=\"icon-button\">\n                      <i class=\"fas fa-trash\"></i>\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            \n            <button class=\"auth-button\" @click=\"addNewUser\">\n              <span>+ New User</span>\n            </button>\n          </div>\n        </div>\n      </main>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  import router from '../router';\n  \n  export default {\n    name: 'UserList',\n    data() {\n      return {\n        users: [],\n        validUserName: 'Admin',\n        showMsg: '',\n        authenticated: false\n      };\n    },\n    beforeCreate() {\n      const isAuthenticated = localStorage.getItem('access_token');\n      const isAdmin = JSON.parse(localStorage.getItem('is_staff') || false)\n      \n      if (!isAuthenticated || !isAdmin) {\n        router.push('/auth');\n      }\n    },\n    async mounted() {\n      await this.getUsers();\n      this.showMessages();\n    },\n    methods: {\n      async getUsers() {\n        try {\n          const response = await axios.get('http://localhost:8000/api/users/', {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`\n            }\n          });\n          this.users = response.data;\n        } catch (error) {\n          this.handleError(error);\n        }\n      },\n      showMessages() {\n        if (this.$route.params.msg) {\n          this.showMsg = this.$route.params.msg;\n        }\n      },\n      addNewUser() {\n        router.push('/users/create');\n      },\n      updateUser(user) {\n        router.push(`/users/edit/${user.id}`);\n      },\n      async deleteUser(user) {\n        if (confirm(`Are you sure you want to delete ${user.username}?`)) {\n          try {\n            await axios.delete(`http://localhost:8000/api/users/${user.id}/`, {\n              headers: {\n                Authorization: `Bearer ${localStorage.getItem('access_token')}`\n              }\n            });\n            router.push('/users/deleted');\n            await this.getUsers();\n          } catch (error) {\n            this.handleError(error);\n          }\n        }\n      },\n      handleError(error) {\n        if (error.response) {\n          switch (error.response.status) {\n            case 401:\n              localStorage.clear();\n              router.push('/auth');\n              break;\n            case 403:\n              alert('You do not have permission for this action');\n              break;\n            default:\n              alert('Error processing request');\n          }\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .user-list-container {\n    padding: 2rem;\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n  \n  .welcome-message {\n    text-align: center;\n    margin-bottom: 2rem;\n    color: #2c3e50;\n  }\n  \n  .status-alerts {\n    margin-bottom: 2rem;\n  }\n  \n  .success {\n    background-color: #d4edda;\n    color: #155724;\n    border-color: #c3e6cb;\n  }\n  \n  /* Mobile View Styles */\n  .mobile-view {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .user-card {\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    padding: 1rem;\n  }\n  \n  .card-header {\n    border-bottom: 1px solid #eee;\n    padding-bottom: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n  \n  .actions {\n    display: flex;\n    gap: 1rem;\n    margin-top: 1rem;\n  }\n  \n  .icon-button {\n    background: none;\n    border: none;\n    color: #42b983;\n    cursor: pointer;\n    padding: 0.5rem;\n  }\n  \n  /* Desktop View Styles */\n  .user-table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-bottom: 2rem;\n  }\n  \n  .user-table th,\n  .user-table td {\n    padding: 1rem;\n    text-align: left;\n    border-bottom: 1px solid #eee;\n  }\n  \n  .user-table th {\n    background-color: #f8f9fa;\n  }\n  \n  .header {\n    background-color: #2c3e50;\n    padding: 1rem 2rem;\n  }\n  \n  .navbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n  \n  .logo a {\n    color: white;\n    font-size: 1.5rem;\n    font-weight: bold;\n    text-decoration: none;\n  }\n  \n  .auth-button {\n    background-color: #42b983;\n    color: white;\n    padding: 0.8rem 1.5rem;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  \n  .auth-button:hover {\n    background-color: #359768;\n  }\n  \n  @media (max-width: 768px) {\n    .user-table {\n      display: none;\n    }\n  }\n  </style>"],"mappings":";AAuGE,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,WAAW;AAE9B,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,aAAa,EAAE,OAAO;MACtBC,OAAO,EAAE,EAAE;MACXC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,YAAYA,CAAA,EAAG;IACb,MAAMC,eAAc,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAC5D,MAAMC,OAAM,GAAIC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,UAAU,KAAK,KAAK;IAEpE,IAAI,CAACF,eAAc,IAAK,CAACG,OAAO,EAAE;MAChCX,MAAM,CAACc,IAAI,CAAC,OAAO,CAAC;IACtB;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,QAAQ,CAAC,CAAC;IACrB,IAAI,CAACC,YAAY,CAAC,CAAC;EACrB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMF,QAAQA,CAAA,EAAG;MACf,IAAI;QACF,MAAMG,QAAO,GAAI,MAAMpB,KAAK,CAACqB,GAAG,CAAC,kCAAkC,EAAE;UACnEC,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUb,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;UAC/D;QACF,CAAC,CAAC;QACF,IAAI,CAACP,KAAI,GAAIgB,QAAQ,CAACjB,IAAI;MAC5B,EAAE,OAAOqB,KAAK,EAAE;QACd,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC;MACzB;IACF,CAAC;IACDN,YAAYA,CAAA,EAAG;MACb,IAAI,IAAI,CAACQ,MAAM,CAACC,MAAM,CAACC,GAAG,EAAE;QAC1B,IAAI,CAACtB,OAAM,GAAI,IAAI,CAACoB,MAAM,CAACC,MAAM,CAACC,GAAG;MACvC;IACF,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX5B,MAAM,CAACc,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IACDe,UAAUA,CAACC,IAAI,EAAE;MACf9B,MAAM,CAACc,IAAI,CAAC,eAAegB,IAAI,CAACC,EAAE,EAAE,CAAC;IACvC,CAAC;IACD,MAAMC,UAAUA,CAACF,IAAI,EAAE;MACrB,IAAIG,OAAO,CAAC,mCAAmCH,IAAI,CAACI,QAAQ,GAAG,CAAC,EAAE;QAChE,IAAI;UACF,MAAMnC,KAAK,CAACoC,MAAM,CAAC,mCAAmCL,IAAI,CAACC,EAAE,GAAG,EAAE;YAChEV,OAAO,EAAE;cACPC,aAAa,EAAE,UAAUb,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;YAC/D;UACF,CAAC,CAAC;UACFV,MAAM,CAACc,IAAI,CAAC,gBAAgB,CAAC;UAC7B,MAAM,IAAI,CAACE,QAAQ,CAAC,CAAC;QACvB,EAAE,OAAOO,KAAK,EAAE;UACd,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC;QACzB;MACF;IACF,CAAC;IACDC,WAAWA,CAACD,KAAK,EAAE;MACjB,IAAIA,KAAK,CAACJ,QAAQ,EAAE;QAClB,QAAQI,KAAK,CAACJ,QAAQ,CAACiB,MAAM;UAC3B,KAAK,GAAG;YACN3B,YAAY,CAAC4B,KAAK,CAAC,CAAC;YACpBrC,MAAM,CAACc,IAAI,CAAC,OAAO,CAAC;YACpB;UACF,KAAK,GAAG;YACNwB,KAAK,CAAC,4CAA4C,CAAC;YACnD;UACF;YACEA,KAAK,CAAC,0BAA0B,CAAC;QACrC;MACF;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}