{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from '../router';\nexport default {\n  name: 'UserCreate',\n  data() {\n    return {\n      user: {\n        username: '',\n        email: '',\n        password: '',\n        first_name: '',\n        last_name: '',\n        is_staff: false\n      },\n      pageTitle: 'Create New User',\n      isUpdate: false,\n      showMsg: '',\n      errorMessage: ''\n    };\n  },\n  beforeCreate() {\n    const isAuthenticated = localStorage.getItem('access_token');\n    const isAdmin = JSON.parse(localStorage.getItem('is_staff') || false);\n    if (!isAuthenticated || !isAdmin) {\n      router.push('/auth');\n    }\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        if (this.isUpdate) {\n          await this.updateUser();\n        } else {\n          await this.createUser();\n        }\n      } catch (error) {\n        this.handleError(error);\n      }\n    },\n    async createUser() {\n      const response = await axios.post('http://localhost:8000/api/users/', this.user, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('access_token')}`\n        }\n      });\n      if (response.status === 201) {\n        router.push('/users');\n      }\n    },\n    async updateUser() {\n      const response = await axios.put(`http://localhost:8000/api/users/${this.$route.params.id}/`, this.user, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('access_token')}`\n        }\n      });\n      if (response.status === 200) {\n        router.push('/users');\n      }\n    },\n    cancelOperation() {\n      router.push('/users');\n    },\n    handleError(error) {\n      this.showMsg = 'error';\n      if (error.response) {\n        switch (error.response.status) {\n          case 401:\n            this.errorMessage = 'Session expired. Please login again.';\n            router.push('/auth');\n            break;\n          case 403:\n            this.errorMessage = 'You do not have permission for this action.';\n            break;\n          case 400:\n            this.errorMessage = error.response.data.detail || 'Invalid input data.';\n            break;\n          default:\n            this.errorMessage = 'Server error. Please try again later.';\n        }\n      } else {\n        this.errorMessage = 'Network error. Please check your connection.';\n      }\n    }\n  },\n  async mounted() {\n    if (this.$route.params.id) {\n      this.isUpdate = true;\n      this.pageTitle = 'Edit User';\n      try {\n        const response = await axios.get(`http://localhost:8000/api/users/${this.$route.params.id}/`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n        });\n        this.user = response.data;\n      } catch (error) {\n        this.handleError(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","router","name","data","user","username","email","password","first_name","last_name","is_staff","pageTitle","isUpdate","showMsg","errorMessage","beforeCreate","isAuthenticated","localStorage","getItem","isAdmin","JSON","parse","push","methods","handleSubmit","updateUser","createUser","error","handleError","response","post","headers","Authorization","status","put","$route","params","id","cancelOperation","detail","mounted","get"],"sources":["/Users/leothecub/PycharmProjects/pythonActivities/trackspend-fe/src/components/UserCreate.vue"],"sourcesContent":["<template>\n    <div class=\"auth-page\">\n      <header class=\"header\">\n        <nav class=\"navbar\">\n          <div class=\"logo\">\n            <router-link to=\"/\">TrackSpend</router-link>\n          </div>\n          <div class=\"nav-links\">\n            <router-link to=\"/users\" class=\"sign-in-button\">Back to Users</router-link>\n          </div>\n        </nav>\n      </header>\n  \n      <main class=\"auth-container\">\n        <div class=\"auth-card\">\n          <h2 class=\"auth-title\">{{ pageTitle }}</h2>\n          \n          <div v-if=\"showMsg === 'error'\" class=\"auth-alert error\">\n            {{ errorMessage }}\n          </div>\n  \n          <form @submit.prevent=\"handleSubmit\" class=\"auth-form\">\n            <div class=\"form-group\">\n              <label>Username</label>\n              <input\n                v-model=\"user.username\"\n                type=\"text\"\n                required\n                class=\"form-input\"\n                placeholder=\"Enter username\"\n              />\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Email</label>\n              <input\n                v-model=\"user.email\"\n                type=\"email\"\n                required\n                class=\"form-input\"\n                placeholder=\"Enter email\"\n              />\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Password</label>\n              <input\n                v-model=\"user.password\"\n                type=\"password\"\n                :required=\"!isUpdate\"\n                class=\"form-input\"\n                placeholder=\"Enter password\"\n              />\n            </div>\n  \n            <div class=\"name-fields\">\n              <div class=\"form-group\">\n                <label>First Name</label>\n                <input\n                  v-model=\"user.first_name\"\n                  type=\"text\"\n                  class=\"form-input\"\n                  placeholder=\"First name\"\n                />\n              </div>\n  \n              <div class=\"form-group\">\n                <label>Last Name</label>\n                <input\n                  v-model=\"user.last_name\"\n                  type=\"text\"\n                  class=\"form-input\"\n                  placeholder=\"Last name\"\n                />\n              </div>\n            </div>\n  \n            <div class=\"form-group\">\n              <label>Admin Privileges</label>\n              <select v-model=\"user.is_staff\" class=\"form-input\">\n                <option :value=\"false\">Regular User</option>\n                <option :value=\"true\">Administrator</option>\n              </select>\n            </div>\n  \n            <div class=\"action-buttons\">\n              <button type=\"submit\" class=\"auth-button\">\n                {{ isUpdate ? 'Update' : 'Create' }}\n              </button>\n              <button type=\"button\" class=\"auth-button secondary\" @click=\"cancelOperation\">\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      </main>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  import router from '../router';\n  \n  export default {\n    name: 'UserCreate',\n    data() {\n      return {\n        user: {\n          username: '',\n          email: '',\n          password: '',\n          first_name: '',\n          last_name: '',\n          is_staff: false\n        },\n        pageTitle: 'Create New User',\n        isUpdate: false,\n        showMsg: '',\n        errorMessage: ''\n      };\n    },\n    beforeCreate() {\n      const isAuthenticated = localStorage.getItem('access_token');\n      const isAdmin = JSON.parse(localStorage.getItem('is_staff') || false)\n      \n      if (!isAuthenticated || !isAdmin) {\n        router.push('/auth');\n      }\n    },\n    methods: {\n      async handleSubmit() {\n        try {\n          if (this.isUpdate) {\n            await this.updateUser();\n          } else {\n            await this.createUser();\n          }\n        } catch (error) {\n          this.handleError(error);\n        }\n      },\n      async createUser() {\n        const response = await axios.post(\n          'http://localhost:8000/api/users/',\n          this.user,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`\n            }\n          }\n        );\n        \n        if (response.status === 201) {\n          router.push('/users');\n        }\n      },\n      async updateUser() {\n        const response = await axios.put(\n          `http://localhost:8000/api/users/${this.$route.params.id}/`,\n          this.user,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`\n            }\n          }\n        );\n        \n        if (response.status === 200) {\n          router.push('/users');\n        }\n      },\n      cancelOperation() {\n        router.push('/users');\n      },\n      handleError(error) {\n        this.showMsg = 'error';\n        if (error.response) {\n          switch (error.response.status) {\n            case 401:\n              this.errorMessage = 'Session expired. Please login again.';\n              router.push('/auth');\n              break;\n            case 403:\n              this.errorMessage = 'You do not have permission for this action.';\n              break;\n            case 400:\n              this.errorMessage = error.response.data.detail || 'Invalid input data.';\n              break;\n            default:\n              this.errorMessage = 'Server error. Please try again later.';\n          }\n        } else {\n          this.errorMessage = 'Network error. Please check your connection.';\n        }\n      }\n    },\n    async mounted() {\n      if (this.$route.params.id) {\n        this.isUpdate = true;\n        this.pageTitle = 'Edit User';\n        \n        try {\n          const response = await axios.get(\n            `http://localhost:8000/api/users/${this.$route.params.id}/`,\n            {\n              headers: {\n                Authorization: `Bearer ${localStorage.getItem('access_token')}`\n              }\n            }\n          );\n          this.user = response.data;\n        } catch (error) {\n          this.handleError(error);\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  /* Reuse styles from previous components */\n  .auth-page {\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n  }\n  \n  .auth-container {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n    background-color: #f5f7fb;\n  }\n  \n  .auth-card {\n    background: white;\n    padding: 2.5rem;\n    border-radius: 12px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    width: 100%;\n    max-width: 600px;\n  }\n  \n  .action-buttons {\n    display: flex;\n    gap: 1rem;\n    margin-top: 1.5rem;\n  }\n  \n  .secondary {\n    background-color: #6c757d;\n  }\n  \n  .secondary:hover {\n    background-color: #5a6268;\n  }\n  \n  </style>"],"mappings":";AAoGE,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,WAAW;AAE9B,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,UAAU,EAAE,EAAE;QACdC,SAAS,EAAE,EAAE;QACbC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE,iBAAiB;MAC5BC,QAAQ,EAAE,KAAK;MACfC,OAAO,EAAE,EAAE;MACXC,YAAY,EAAE;IAChB,CAAC;EACH,CAAC;EACDC,YAAYA,CAAA,EAAG;IACb,MAAMC,eAAc,GAAIC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAC5D,MAAMC,OAAM,GAAIC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,UAAU,KAAK,KAAK;IAEpE,IAAI,CAACF,eAAc,IAAK,CAACG,OAAO,EAAE;MAChClB,MAAM,CAACqB,IAAI,CAAC,OAAO,CAAC;IACtB;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,IAAI,IAAI,CAACZ,QAAQ,EAAE;UACjB,MAAM,IAAI,CAACa,UAAU,CAAC,CAAC;QACzB,OAAO;UACL,MAAM,IAAI,CAACC,UAAU,CAAC,CAAC;QACzB;MACF,EAAE,OAAOC,KAAK,EAAE;QACd,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC;MACzB;IACF,CAAC;IACD,MAAMD,UAAUA,CAAA,EAAG;MACjB,MAAMG,QAAO,GAAI,MAAM7B,KAAK,CAAC8B,IAAI,CAC/B,kCAAkC,EAClC,IAAI,CAAC1B,IAAI,EACT;QACE2B,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUf,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAC/D;MACF,CACF,CAAC;MAED,IAAIW,QAAQ,CAACI,MAAK,KAAM,GAAG,EAAE;QAC3BhC,MAAM,CAACqB,IAAI,CAAC,QAAQ,CAAC;MACvB;IACF,CAAC;IACD,MAAMG,UAAUA,CAAA,EAAG;MACjB,MAAMI,QAAO,GAAI,MAAM7B,KAAK,CAACkC,GAAG,CAC9B,mCAAmC,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE,GAAG,EAC3D,IAAI,CAACjC,IAAI,EACT;QACE2B,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUf,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;QAC/D;MACF,CACF,CAAC;MAED,IAAIW,QAAQ,CAACI,MAAK,KAAM,GAAG,EAAE;QAC3BhC,MAAM,CAACqB,IAAI,CAAC,QAAQ,CAAC;MACvB;IACF,CAAC;IACDgB,eAAeA,CAAA,EAAG;MAChBrC,MAAM,CAACqB,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IACDM,WAAWA,CAACD,KAAK,EAAE;MACjB,IAAI,CAACd,OAAM,GAAI,OAAO;MACtB,IAAIc,KAAK,CAACE,QAAQ,EAAE;QAClB,QAAQF,KAAK,CAACE,QAAQ,CAACI,MAAM;UAC3B,KAAK,GAAG;YACN,IAAI,CAACnB,YAAW,GAAI,sCAAsC;YAC1Db,MAAM,CAACqB,IAAI,CAAC,OAAO,CAAC;YACpB;UACF,KAAK,GAAG;YACN,IAAI,CAACR,YAAW,GAAI,6CAA6C;YACjE;UACF,KAAK,GAAG;YACN,IAAI,CAACA,YAAW,GAAIa,KAAK,CAACE,QAAQ,CAAC1B,IAAI,CAACoC,MAAK,IAAK,qBAAqB;YACvE;UACF;YACE,IAAI,CAACzB,YAAW,GAAI,uCAAuC;QAC/D;MACF,OAAO;QACL,IAAI,CAACA,YAAW,GAAI,8CAA8C;MACpE;IACF;EACF,CAAC;EACD,MAAM0B,OAAOA,CAAA,EAAG;IACd,IAAI,IAAI,CAACL,MAAM,CAACC,MAAM,CAACC,EAAE,EAAE;MACzB,IAAI,CAACzB,QAAO,GAAI,IAAI;MACpB,IAAI,CAACD,SAAQ,GAAI,WAAW;MAE5B,IAAI;QACF,MAAMkB,QAAO,GAAI,MAAM7B,KAAK,CAACyC,GAAG,CAC9B,mCAAmC,IAAI,CAACN,MAAM,CAACC,MAAM,CAACC,EAAE,GAAG,EAC3D;UACEN,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUf,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;UAC/D;QACF,CACF,CAAC;QACD,IAAI,CAACd,IAAG,GAAIyB,QAAQ,CAAC1B,IAAI;MAC3B,EAAE,OAAOwB,KAAK,EAAE;QACd,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC;MACzB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}